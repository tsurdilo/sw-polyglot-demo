"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Receiver = void 0;
const message_1 = require("../message");
const headers_1 = require("../message/http/headers");
/**
 * A class to receive a CloudEvent from an HTTP POST request.
 */
exports.Receiver = {
    /**
     * Acceptor for an incoming HTTP CloudEvent POST. Can process
     * binary and structured incoming CloudEvents.
     *
     * @param {Object} headers HTTP headers keyed by header name ("Content-Type")
     * @param {Object|JSON} body The body of the HTTP request
     * @return {CloudEvent} A new {CloudEvent} instance
     * @deprecated Will be removed in 4.0.0. Consider using the Message interface with HTTP.toEvent(message)
     */
    accept(headers, body) {
        const cleanHeaders = headers_1.sanitize(headers);
        const cleanBody = body ? (typeof body === "object" ? JSON.stringify(body) : body) : "";
        const message = {
            headers: cleanHeaders,
            body: cleanBody,
        };
        return message_1.HTTP.toEvent(message);
    },
};
